<!-- Enter New Password Step - The user will enter his new password here -->
<div class="reset-password-form">
    <form [formGroup]="form" (ngSubmit)="onSubmit()">
        <header class="form-header">
            <p id="welcome-message">Reset Your Password</p>
            <p id="reset-instructions">
                Enter your new password below to complete the reset process. Make sure to choose a strong password
                that you haven't used before.
            </p>
        </header>

        <label>New Password</label>
        <div class="form-input">
            <input type="password" placeholder="Enter New Password" formControlName="password" />
        </div>

        <app-password-strenght-meter [password]="form.get('password')?.value ?? ''"></app-password-strenght-meter>

        <div class="error-message" *ngIf="form.get('password')?.invalid && form.get('password')?.touched">
            <small *ngIf="form.get('password')?.errors?.['required']">Password is required</small>
            <small *ngIf="form.get('password')?.errors?.['minlength']">Password must be at least 8 characters</small>
            <small *ngIf="form.get('password')?.errors?.['pattern']">
                Password must contain at least one uppercase letter, one lowercase letter, one number, and one special
                character
            </small>
        </div>

        <label>Reenter your New Password</label>
        <div class="form-input">
            <input type="password" placeholder="Make sure the passwords match" formControlName="confirmPassword" />
        </div>

        <div class="error-message" *ngIf="form.get('confirmPassword')?.touched && form.errors?.['passwordMismatch']">
            <small>Passwords do not match</small>
        </div>

        <button type="submit" class="reset-button" [disabled]="form.invalid || isLoading">
            Reset Password
        </button>

        <p class="reset-section">
            Remembered your password?
            <a routerLink="/auth/login">Log in</a>
        </p>
    </form>
</div>